
DÃ©ploiement Superset DaemonSet - Architecture KeyBuzz
Timestamp: 2025-11-02 15:31:09

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 0: VÃ©rifications prÃ©alables                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ Credentials PostgreSQL ... [0;32mOK[0m
â†’ Credentials Redis ... [0;32mOK[0m
â†’ Cluster K3s ... [0;32mOK[0m

Architecture validÃ©e :
  âœ“ PostgreSQL : 10.0.0.10:5432 (via LB Hetzner â†’ HAProxy â†’ Patroni)
  âœ“ Redis      : 10.0.0.10:6379 (via LB Hetzner â†’ HAProxy â†’ Sentinel)

Continuer le dÃ©ploiement Superset DaemonSet ? (yes/NO) : 
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 1: Nettoyage des ressources existantes                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

deployment.apps "superset" deleted from superset namespace
  (pas de daemonset)
  (pas de job init)
  (pas de job admin)
Attente suppression (10s)...
[0;32mOK[0m Nettoyage terminÃ©

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 2: CrÃ©ation namespace, secrets et configuration         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[0;32mOK[0m Namespace superset crÃ©Ã©
secret/superset-secrets configured
[0;32mOK[0m Secret superset-secrets crÃ©Ã©
configmap/superset-config configured
[0;32mOK[0m ConfigMap superset-config crÃ©Ã©

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 3: Initialisation base de donnÃ©es                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

job.batch/superset-init-db created
job.batch/superset-create-admin created
Attente init DB (120s max)...
[0;33mWARN[0m Init DB prend plus de temps...
Defaulting to user installation because normal site-packages is not writeable
WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x77cd626e8e50>: Failed to establish a new connection: [Errno -3] Temporary failure in name resolution')': /simple/psycopg2-binary/
WARNING: Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x77cd626e9180>: Failed to establish a new connection: [Errno -3] Temporary failure in name resolution')': /simple/psycopg2-binary/
WARNING: Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x77cd626e9330>: Failed to establish a new connection: [Errno -3] Temporary failure in name resolution')': /simple/psycopg2-binary/
WARNING: Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x77cd626e94e0>: Failed to establish a new connection: [Errno -3] Temporary failure in name resolution')': /simple/psycopg2-binary/
WARNING: Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('<pip._vendor.urllib3.connection.HTTPSConnection object at 0x77cd626e9690>: Failed to establish a new connection: [Errno -3] Temporary failure in name resolution')': /simple/psycopg2-binary/

Attente create admin (90s max)...
[0;33mWARN[0m Create admin prend plus de temps...
error: timed out waiting for the condition
[0;32mOK[0m Init DB terminÃ©e

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 4: DÃ©ploiement DaemonSet Superset                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

daemonset.apps/superset created
service/superset configured
ingress.networking.k8s.io/superset configured
[0;32mOK[0m DaemonSet dÃ©ployÃ©

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 5: Attente dÃ©marrage pods (120s)                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ã‰tat des pods Superset :
NAME                     READY   STATUS    RESTARTS      AGE     IP           NODE            NOMINATED NODE   READINESS GATES
superset-65dw7           1/1     Running   0             2m      10.0.0.101   k3s-master-02   <none>           <none>
superset-7fbqx           1/1     Running   0             2m      10.0.0.111   k3s-worker-02   <none>           <none>
superset-7wkxk           1/1     Running   0             2m      10.0.0.110   k3s-worker-01   <none>           <none>
superset-init-db-rhcqw   1/1     Running   2 (51s ago)   5m51s   10.0.0.114   k3s-worker-05   <none>           <none>
superset-kbk4z           1/1     Running   0             2m      10.0.0.100   k3s-master-01   <none>           <none>
superset-rzxzx           1/1     Running   0             2m      10.0.0.102   k3s-master-03   <none>           <none>
superset-xfqk5           1/1     Running   1 (58s ago)   2m      10.0.0.113   k3s-worker-04   <none>           <none>
superset-zsmgj           1/1     Running   0             2m      10.0.0.112   k3s-worker-03   <none>           <none>
superset-zx87b           1/1     Running   0             2m      10.0.0.114   k3s-worker-05   <none>           <none>

Ã‰tat du service :
NAME       TYPE       CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
superset   NodePort   10.43.40.140   <none>        8088:30808/TCP   5h25m

Ã‰tat de l'Ingress :
NAME       CLASS   HOSTS                 ADDRESS     PORTS   AGE
superset   nginx   superset.keybuzz.io   localhost   80      46h

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[0;32mOK[0m SUPERSET DAEMONSET DÃ‰PLOYÃ‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Architecture :
  âœ“ Type       : DaemonSet avec hostNetwork (comme n8n/litellm/qdrant)
  âœ“ Pods       : 1 pod par nÅ“ud (8 nÅ“uds = 8 pods)
  âœ“ Port       : 8088 (hostPort sur chaque nÅ“ud)
  âœ“ PostgreSQL : 10.0.0.10:5432
  âœ“ Redis      : 10.0.0.10:6379

URL d'accÃ¨s : http://superset.keybuzz.io

Credentials :
  Username : admin
  Password : Admin123!
  Email    : admin@keybuzz.io

Prochaine Ã©tape :
  ./14_test_all_apps.sh

