
Installation Redis HA - Architecture complÃ¨te
Timestamp: 2025-10-28 18:20:10

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 0: VÃ©rifications prÃ©alables                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Serveurs Redis trouvÃ©s: 3
  Serveurs HAProxy trouvÃ©s: 2

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 1: Gestion sÃ©curisÃ©e des credentials                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Chargement des credentials existants...
  Hash du mot de passe: e692a9301269609a...

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 2: PrÃ©paration des serveurs Redis                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  PrÃ©paration de redis-01 (10.0.0.123)...
446b802ade01
446b802ade01
436d5b883f98
436d5b883f98
    âœ“ PrÃ©parÃ© et nettoyÃ©
  PrÃ©paration de redis-02 (10.0.0.124)...
07c4a57b8488
07c4a57b8488
e0d39d1a48ae
e0d39d1a48ae
    âœ“ PrÃ©parÃ© et nettoyÃ©
  PrÃ©paration de redis-03 (10.0.0.125)...
4369d117a4cd
4369d117a4cd
153e5bf06291
153e5bf06291
    âœ“ PrÃ©parÃ© et nettoyÃ©

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 3: DÃ©ploiement Redis et Sentinel                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Master initial: redis-01 (10.0.0.123)

  DÃ©ploiement redis-01 (master)...
time="2025-10-28T18:20:17Z" level=warning msg="/opt/keybuzz/redis/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container redis  Creating
 Container redis  Created
 Container sentinel  Creating
 Container sentinel  Created
 Container redis  Starting
 Container redis  Started
 Container sentinel  Starting
 Container sentinel  Started
2
    âœ“ Redis + Sentinel dÃ©marrÃ©s
  DÃ©ploiement redis-02 (replica)...
time="2025-10-28T18:20:24Z" level=warning msg="/opt/keybuzz/redis/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container redis  Creating
 Container redis  Created
 Container sentinel  Creating
 Container sentinel  Created
 Container redis  Starting
 Container redis  Started
 Container sentinel  Starting
 Container sentinel  Started
2
    âœ“ Redis + Sentinel dÃ©marrÃ©s
  DÃ©ploiement redis-03 (replica)...
time="2025-10-28T18:20:30Z" level=warning msg="/opt/keybuzz/redis/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container redis  Creating
 Container redis  Created
 Container sentinel  Creating
 Container sentinel  Created
 Container redis  Starting
 Container redis  Started
 Container sentinel  Starting
 Container sentinel  Started
2
    âœ“ Redis + Sentinel dÃ©marrÃ©s

  Attente de stabilisation du cluster (15s)...

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 4: VÃ©rification du cluster Redis                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Test de connexion Redis:
    redis-01: [0;32mOK[0m (role: master)
    redis-02: [0;32mOK[0m (role: slave)
    redis-03: [0;32mOK[0m (role: slave)

  Test des Sentinels (avec timeout):
    redis-01: [0;32mOK[0m (voit master: 10.0.0.123)
    redis-02: [0;32mOK[0m (voit master: 10.0.0.123)
    redis-03: [0;32mOK[0m (voit master: 10.0.0.123)

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 5: Configuration Load Balancer sur HAProxy               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Configuration haproxy-01 (10.0.0.11)...
b0c1007b0024
b0c1007b0024
3d637f9a843f5b90ceec2e7a20d0052fd4a939a2895eb322712bab9913eb2fb7
    âœ“ Load Balancer configurÃ©
  Configuration haproxy-02 (10.0.0.12)...
8a9b85822623
8a9b85822623
d3861c6385be925d2f40a00a4a6e69289d888b8185275d9511510adb384930ab
    âœ“ Load Balancer configurÃ©

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 6: Tests finaux                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Test HAProxy locaux:
    haproxy-01: [0;32mOK[0m
    haproxy-02: [0;32mOK[0m

  Test via Load Balancer Hetzner:
    10.0.0.10:6379: [0;32mOK[0m

  Test de rÃ©plication:
    Ã‰criture sur master via LB: [0;32mOK[0m
    Lecture sur redis-02: [0;32mOK[0m
    Lecture sur redis-03: [0;32mOK[0m

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[0;32mOK[0m REDIS HA INSTALLATION COMPLÃˆTE ET OPÃ‰RATIONNELLE

Endpoint: 10.0.0.10:6379
Credentials: /opt/keybuzz-installer/credentials/redis.env
Hash du mot de passe: e692a9301269609a...

Pour tester:
  source /opt/keybuzz-installer/credentials/redis.env
  redis-cli -h 10.0.0.10 -p 6379 -a "$REDIS_PASSWORD" --no-auth-warning

RÃ©sumÃ© complet: /opt/keybuzz-installer/credentials/redis-summary.txt
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
