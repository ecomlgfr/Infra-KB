
â•â•â• Configuration â•â•â•
  Master-01 : 10.0.0.100
  Log       : /opt/keybuzz-installer/logs/fix_apps_deployment.log

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•â•â• Ã‰TAPE 1/5 : Diagnostic des erreurs â•â•â•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ VÃ©rification du webhook Ingress NGINX...
  Pod admission controller trouvÃ© : pod/ingress-nginx-controller-68fb8cf9cc-gfkfq

  VÃ©rification du service admission...
NAME                                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE
ingress-nginx-controller-admission   ClusterIP   10.43.255.101   <none>        443/TCP   54m

â†’ Logs des pods en erreur...

  n8n logs :
Permissions 0644 for n8n settings file /home/node/.n8n/config are too wide. This is ignored for now, but in the future n8n will attempt to change the permissions automatically. To automatically enforce correct permissions now set N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true (recommended), or turn this check off set N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=false.
Last session crashed
Initializing n8n process
There was an error initializing DB
password authentication failed for user "n8n"
Permissions 0644 for n8n settings file /home/node/.n8n/config are too wide. This is ignored for now, but in the future n8n will attempt to change the permissions automatically. To automatically enforce correct permissions now set N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true (recommended), or turn this check off set N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=false.
Last session crashed
Initializing n8n process
There was an error initializing DB
password authentication failed for user "n8n"

  Chatwoot init-db logs :
ActiveRecord::NoDatabaseError: We could not find your database: chatwoot. Available database configurations can be found in config/database.yml. (ActiveRecord::NoDatabaseError)

To resolve this error:

- Did you not create the database, or did you delete it? To create the database, run:

    bin/rails db:create

- Has the database name changed? Verify that config/database.yml contains the correct database name.
/app/lib/tasks/db_enhancements.rake:20:in 'block (3 levels) in <main>'
/app/lib/tasks/db_enhancements.rake:18:in 'Array#each'
/app/lib/tasks/db_enhancements.rake:18:in 'block (2 levels) in <main>'

Caused by:
PG::ConnectionBad: connection to server at "10.0.0.10", port 5432 failed: FATAL:  password authentication failed for user "chatwoot" (PG::ConnectionBad)
/app/lib/tasks/db_enhancements.rake:20:in 'block (3 levels) in <main>'
/app/lib/tasks/db_enhancements.rake:18:in 'Array#each'
/app/lib/tasks/db_enhancements.rake:18:in 'block (2 levels) in <main>'
Tasks: TOP => db:setup => db:create
(See full trace by running task with --trace)

  Superset init-db logs :
--------------------------------------------------------------------------------
                                    WARNING
--------------------------------------------------------------------------------
A Default SECRET_KEY was detected, please use superset_config.py to override it.
Use a strong complex alphanumeric string and use a tool to help you generate 
a sufficiently random sequence, ex: openssl rand -base64 42 
For more info, see: https://superset.apache.org/docs/configuration/configuring-superset#specifying-a-secret_key
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
Refusing to start due to insecure SECRET_KEY
--------------------------------------------------------------------------------
                                    WARNING
--------------------------------------------------------------------------------
A Default SECRET_KEY was detected, please use superset_config.py to override it.
Use a strong complex alphanumeric string and use a tool to help you generate 
a sufficiently random sequence, ex: openssl rand -base64 42 
For more info, see: https://superset.apache.org/docs/configuration/configuring-superset#specifying-a-secret_key
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
Refusing to start due to insecure SECRET_KEY

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•â•â• Ã‰TAPE 2/5 : DÃ©sactiver le webhook Ingress NGINX â•â•â•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  Le webhook Ingress NGINX cause des timeouts.
    Nous allons le dÃ©sactiver temporairement pour crÃ©er les Ingress.

[2025-10-31 17:00:08] Suppression du ValidatingWebhookConfiguration...
validatingwebhookconfiguration.admissionregistration.k8s.io "ingress-nginx-admission" deleted
[2025-10-31 17:00:09] Webhook dÃ©sactivÃ©

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•â•â• Ã‰TAPE 3/5 : RecrÃ©er les Ingress â•â•â•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[2025-10-31 17:00:09] CrÃ©ation des Ingress...
ingress.networking.k8s.io/n8n created
  âœ“ Ingress n8n crÃ©Ã©
ingress.networking.k8s.io/chatwoot created
  âœ“ Ingress chatwoot crÃ©Ã©
ingress.networking.k8s.io/litellm created
  âœ“ Ingress litellm crÃ©Ã©
ingress.networking.k8s.io/qdrant created
  âœ“ Ingress qdrant crÃ©Ã©
ingress.networking.k8s.io/superset created
  âœ“ Ingress superset crÃ©Ã©

[2025-10-31 17:00:11] VÃ©rification des Ingress...
NAMESPACE   NAME       CLASS   HOSTS                 ADDRESS   PORTS   AGE
chatwoot    chatwoot   nginx   chat.keybuzz.io                 80      1s
litellm     litellm    nginx   llm.keybuzz.io                  80      1s
n8n         n8n        nginx   n8n.keybuzz.io                  80      2s
qdrant      qdrant     nginx   qdrant.keybuzz.io               80      0s
superset    superset   nginx   superset.keybuzz.io             80      0s

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•â•â• Ã‰TAPE 4/5 : Corriger le dÃ©ploiement n8n â•â•â•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  n8n n'a pas d'endpoint /healthz par dÃ©faut.
    Correction : utiliser / comme healthcheck.

[2025-10-31 17:00:12] Mise Ã  jour du dÃ©ploiement n8n...
deployment.apps "n8n" deleted
deployment.apps/n8n created
  âœ“ DÃ©ploiement n8n corrigÃ©

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•â•â• Ã‰TAPE 5/5 : VÃ©rification et recommandations â•â•â•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Attente du redÃ©marrage des pods (30s)...

Ã‰tat des applications aprÃ¨s correction :

â”â”â” n8n â”â”â”
NAME                  READY   STATUS    RESTARTS     AGE   IP          NODE            NOMINATED NODE   READINESS GATES
n8n-c758d9bd4-qqzsf   0/1     Running   1 (8s ago)   31s   10.42.6.6   k3s-worker-04   <none>           <none>
n8n-c758d9bd4-sklv6   0/1     Running   1 (9s ago)   31s   10.42.6.7   k3s-worker-04   <none>           <none>

â”â”â” chatwoot â”â”â”
NAME                               READY   STATUS                  RESTARTS      AGE   IP          NODE            NOMINATED NODE   READINESS GATES
chatwoot-web-6bcd5c66c7-6lhzp      0/1     Init:CrashLoopBackOff   7 (57s ago)   14m   10.42.3.8   k3s-worker-01   <none>           <none>
chatwoot-web-6bcd5c66c7-xb7zl      0/1     Init:CrashLoopBackOff   7 (61s ago)   14m   10.42.3.7   k3s-worker-01   <none>           <none>
chatwoot-worker-79bbdb5998-2fr7m   0/1     CrashLoopBackOff        7 (84s ago)   14m   10.42.3.6   k3s-worker-01   <none>           <none>
chatwoot-worker-79bbdb5998-wt2pw   0/1     CrashLoopBackOff        7 (74s ago)   14m   10.42.3.9   k3s-worker-01   <none>           <none>

â”â”â” litellm â”â”â”
NAME                       READY   STATUS             RESTARTS        AGE   IP          NODE            NOMINATED NODE   READINESS GATES
litellm-6d4877db58-4d5h2   1/1     Running            6 (3m48s ago)   14m   10.42.7.3   k3s-worker-05   <none>           <none>
litellm-6d4877db58-rjwdk   0/1     CrashLoopBackOff   5 (2m34s ago)   14m   10.42.4.3   k3s-worker-02   <none>           <none>

â”â”â” qdrant â”â”â”
NAME       READY   STATUS    RESTARTS   AGE   IP          NODE            NOMINATED NODE   READINESS GATES
qdrant-0   1/1     Running   0          13m   10.42.5.6   k3s-worker-03   <none>           <none>

â”â”â” superset â”â”â”
NAME                        READY   STATUS                  RESTARTS      AGE   IP          NODE            NOMINATED NODE   READINESS GATES
superset-6b56fc5cdd-hnnvk   0/1     Init:CrashLoopBackOff   7 (79s ago)   13m   10.42.7.4   k3s-worker-05   <none>           <none>
superset-6b56fc5cdd-q9flb   0/1     Init:CrashLoopBackOff   7 (18s ago)   13m   10.42.4.4   k3s-worker-02   <none>           <none>

â”â”â” Ingress crÃ©Ã©s â”â”â”
NAMESPACE   NAME       CLASS   HOSTS                 ADDRESS        PORTS   AGE
chatwoot    chatwoot   nginx   chat.keybuzz.io       10.43.96.199   80      35s
litellm     litellm    nginx   llm.keybuzz.io        10.43.96.199   80      35s
n8n         n8n        nginx   n8n.keybuzz.io        10.43.96.199   80      36s
qdrant      qdrant     nginx   qdrant.keybuzz.io     10.43.96.199   80      34s
superset    superset   nginx   superset.keybuzz.io   10.43.96.199   80      34s

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[0;33mWARN[0m RECOMMANDATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Pods encore en erreur :

   â†’ n8n : Si toujours en erreur, vÃ©rifier la connexion PostgreSQL
     kubectl logs -n n8n -l app=n8n --tail=50

   â†’ Chatwoot : Init container db-migrate Ã©choue probablement
     kubectl logs -n chatwoot <pod-name> -c db-migrate
     Causes possibles :
       - PostgreSQL inaccessible (vÃ©rifier 10.0.0.10:5432)
       - Variables DATABASE_URL incorrectes
       - Base 'chatwoot' n'existe pas

   â†’ Superset : MÃªme problÃ¨me que Chatwoot
     kubectl logs -n superset <pod-name> -c init-db

2. CrÃ©er les bases de donnÃ©es si nÃ©cessaire :

   Sur le serveur PostgreSQL (10.0.0.10) :
   psql -U postgres -c "CREATE DATABASE n8n;"
   psql -U postgres -c "CREATE DATABASE chatwoot;"
   psql -U postgres -c "CREATE DATABASE superset;"
   psql -U postgres -c "CREATE DATABASE litellm;"

3. RecrÃ©er les pods aprÃ¨s crÃ©ation des DB :
   kubectl rollout restart deployment/n8n -n n8n
   kubectl rollout restart deployment/chatwoot-web -n chatwoot
   kubectl rollout restart deployment/chatwoot-worker -n chatwoot
   kubectl rollout restart deployment/superset -n superset

4. Webhook Ingress NGINX :
   Le webhook a Ã©tÃ© dÃ©sactivÃ© pour permettre la crÃ©ation des Ingress.
   C'est normal en environnement simple. Il valide juste la syntaxe des Ingress.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[0;32mOK[0m CORRECTIONS APPLIQUÃ‰ES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Actions effectuÃ©es :
  âœ“ Webhook Ingress NGINX dÃ©sactivÃ©
  âœ“ 5 Ingress crÃ©Ã©s manuellement
  âœ“ DÃ©ploiement n8n corrigÃ© (healthcheck)

Prochaine Ã©tape :
  1. CrÃ©er les bases de donnÃ©es PostgreSQL manquantes
  2. Relancer : ./apps_final_tests.sh


â•â•â• Configuration â•â•â•
  Master-01 : 10.0.0.100
  Log       : /opt/keybuzz-installer/logs/fix_apps_deployment.log

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•â•â• Ã‰TAPE 1/5 : Diagnostic des erreurs â•â•â•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ VÃ©rification du webhook Ingress NGINX...
  Pod admission controller trouvÃ© : pod/ingress-nginx-controller-68fb8cf9cc-gfkfq

  VÃ©rification du service admission...
NAME                                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE
ingress-nginx-controller-admission   ClusterIP   10.43.255.101   <none>        443/TCP   6h49m

â†’ Logs des pods en erreur...

  n8n logs :
    [cause]: Error: getaddrinfo EAI_AGAIN us.i.posthog.com
        at GetAddrInfoReqWrap.onlookup [as oncomplete] (node:dns:111:26) {
      errno: -3001,
      code: 'EAI_AGAIN',
      syscall: 'getaddrinfo',
      hostname: 'us.i.posthog.com'
    }
  },
  [cause]: TypeError: fetch failed
      at node:internal/deps/undici/undici:13510:13
      at processTicksAndRejections (node:internal/process/task_queues:105:5) {
    [cause]: Error: getaddrinfo EAI_AGAIN us.i.posthog.com
        at GetAddrInfoReqWrap.onlookup [as oncomplete] (node:dns:111:26) {
      errno: -3001,
      code: 'EAI_AGAIN',
      syscall: 'getaddrinfo',
      hostname: 'us.i.posthog.com'
    }
  }
}

  Chatwoot init-db logs :
No resources found in chatwoot namespace.

  Superset init-db logs :
No resources found in superset namespace.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•â•â• Ã‰TAPE 2/5 : DÃ©sactiver le webhook Ingress NGINX â•â•â•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  Le webhook Ingress NGINX cause des timeouts.
    Nous allons le dÃ©sactiver temporairement pour crÃ©er les Ingress.

[2025-10-31 22:55:17] Suppression du ValidatingWebhookConfiguration...
  Webhook dÃ©jÃ  supprimÃ©
[2025-10-31 22:55:17] Webhook dÃ©sactivÃ©

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•â•â• Ã‰TAPE 3/5 : RecrÃ©er les Ingress â•â•â•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[2025-10-31 22:55:18] CrÃ©ation des Ingress...
ingress.networking.k8s.io/n8n unchanged
  âœ“ Ingress n8n crÃ©Ã©
ingress.networking.k8s.io/chatwoot unchanged
  âœ“ Ingress chatwoot crÃ©Ã©
ingress.networking.k8s.io/litellm unchanged
  âœ“ Ingress litellm crÃ©Ã©
ingress.networking.k8s.io/qdrant unchanged
  âœ“ Ingress qdrant crÃ©Ã©
ingress.networking.k8s.io/superset unchanged
  âœ“ Ingress superset crÃ©Ã©

[2025-10-31 22:55:19] VÃ©rification des Ingress...
NAMESPACE   NAME       CLASS   HOSTS                 ADDRESS        PORTS   AGE
chatwoot    chatwoot   nginx   chat.keybuzz.io       10.43.96.199   80      5h55m
litellm     litellm    nginx   llm.keybuzz.io        10.43.96.199   80      5h55m
n8n         n8n        nginx   n8n.keybuzz.io        10.43.96.199   80      5h55m
qdrant      qdrant     nginx   qdrant.keybuzz.io     10.43.96.199   80      5h55m
superset    superset   nginx   superset.keybuzz.io   10.43.96.199   80      5h55m

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•â•â• Ã‰TAPE 4/5 : Corriger le dÃ©ploiement n8n â•â•â•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  n8n n'a pas d'endpoint /healthz par dÃ©faut.
    Correction : utiliser / comme healthcheck.

[2025-10-31 22:55:20] Mise Ã  jour du dÃ©ploiement n8n...
deployment.apps "n8n" deleted
deployment.apps/n8n created
  âœ“ DÃ©ploiement n8n corrigÃ©

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•â•â• Ã‰TAPE 5/5 : VÃ©rification et recommandations â•â•â•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Attente du redÃ©marrage des pods (30s)...

Ã‰tat des applications aprÃ¨s correction :

â”â”â” n8n â”â”â”
NAME                  READY   STATUS    RESTARTS   AGE   IP           NODE            NOMINATED NODE   READINESS GATES
n8n-c758d9bd4-fvhr4   0/1     Running   0          32s   10.42.6.15   k3s-worker-04   <none>           <none>
n8n-c758d9bd4-n8nks   0/1     Running   0          32s   10.42.6.16   k3s-worker-04   <none>           <none>

â”â”â” chatwoot â”â”â”

â”â”â” litellm â”â”â”
NAME                      READY   STATUS    RESTARTS   AGE   IP          NODE            NOMINATED NODE   READINESS GATES
litellm-b644576c7-ncrw6   1/1     Running   0          64m   10.42.7.7   k3s-worker-05   <none>           <none>
litellm-b644576c7-rp8tw   1/1     Running   0          64m   10.42.4.7   k3s-worker-02   <none>           <none>

â”â”â” qdrant â”â”â”
NAME       READY   STATUS    RESTARTS   AGE    IP          NODE            NOMINATED NODE   READINESS GATES
qdrant-0   1/1     Running   0          6h9m   10.42.5.6   k3s-worker-03   <none>           <none>

â”â”â” superset â”â”â”

â”â”â” Ingress crÃ©Ã©s â”â”â”
NAMESPACE   NAME       CLASS   HOSTS                 ADDRESS        PORTS   AGE
chatwoot    chatwoot   nginx   chat.keybuzz.io       10.43.96.199   80      5h55m
litellm     litellm    nginx   llm.keybuzz.io        10.43.96.199   80      5h55m
n8n         n8n        nginx   n8n.keybuzz.io        10.43.96.199   80      5h55m
qdrant      qdrant     nginx   qdrant.keybuzz.io     10.43.96.199   80      5h55m
superset    superset   nginx   superset.keybuzz.io   10.43.96.199   80      5h55m

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[0;33mWARN[0m RECOMMANDATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Pods encore en erreur :

   â†’ n8n : Si toujours en erreur, vÃ©rifier la connexion PostgreSQL
     kubectl logs -n n8n -l app=n8n --tail=50

   â†’ Chatwoot : Init container db-migrate Ã©choue probablement
     kubectl logs -n chatwoot <pod-name> -c db-migrate
     Causes possibles :
       - PostgreSQL inaccessible (vÃ©rifier 10.0.0.10:5432)
       - Variables DATABASE_URL incorrectes
       - Base 'chatwoot' n'existe pas

   â†’ Superset : MÃªme problÃ¨me que Chatwoot
     kubectl logs -n superset <pod-name> -c init-db

2. CrÃ©er les bases de donnÃ©es si nÃ©cessaire :

   Sur le serveur PostgreSQL (10.0.0.10) :
   psql -U postgres -c "CREATE DATABASE n8n;"
   psql -U postgres -c "CREATE DATABASE chatwoot;"
   psql -U postgres -c "CREATE DATABASE superset;"
   psql -U postgres -c "CREATE DATABASE litellm;"

3. RecrÃ©er les pods aprÃ¨s crÃ©ation des DB :
   kubectl rollout restart deployment/n8n -n n8n
   kubectl rollout restart deployment/chatwoot-web -n chatwoot
   kubectl rollout restart deployment/chatwoot-worker -n chatwoot
   kubectl rollout restart deployment/superset -n superset

4. Webhook Ingress NGINX :
   Le webhook a Ã©tÃ© dÃ©sactivÃ© pour permettre la crÃ©ation des Ingress.
   C'est normal en environnement simple. Il valide juste la syntaxe des Ingress.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[0;32mOK[0m CORRECTIONS APPLIQUÃ‰ES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Actions effectuÃ©es :
  âœ“ Webhook Ingress NGINX dÃ©sactivÃ©
  âœ“ 5 Ingress crÃ©Ã©s manuellement
  âœ“ DÃ©ploiement n8n corrigÃ© (healthcheck)

Prochaine Ã©tape :
  1. CrÃ©er les bases de donnÃ©es PostgreSQL manquantes
  2. Relancer : ./apps_final_tests.sh

