
Installation Redis HA - Architecture complÃ¨te
Timestamp: 2025-10-30 12:31:45

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 0: VÃ©rifications prÃ©alables                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Serveurs Redis trouvÃ©s: 3
  Serveurs HAProxy trouvÃ©s: 2

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 1: Gestion sÃ©curisÃ©e des credentials                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Chargement des credentials existants...
  Hash du mot de passe: e692a9301269609a...

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 2: PrÃ©paration des serveurs Redis                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  PrÃ©paration de redis-01 (10.0.0.123)...
69fb5d0b4601
69fb5d0b4601
0d2e09064024
0d2e09064024
    âœ“ PrÃ©parÃ© et nettoyÃ©
  PrÃ©paration de redis-02 (10.0.0.124)...
9b920bcee8c9
9b920bcee8c9
6c17c8043b1c
6c17c8043b1c
    âœ“ PrÃ©parÃ© et nettoyÃ©
  PrÃ©paration de redis-03 (10.0.0.125)...
6ef13aebd954
6ef13aebd954
d41bba6a1145
d41bba6a1145
    âœ“ PrÃ©parÃ© et nettoyÃ©

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 3: DÃ©ploiement Redis et Sentinel                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Master initial: redis-01 (10.0.0.123)

  DÃ©ploiement redis-01 (master)...
time="2025-10-30T12:31:52Z" level=warning msg="/opt/keybuzz/redis/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container redis  Creating
 Container redis  Created
 Container sentinel  Creating
 Container sentinel  Created
 Container redis  Starting
 Container redis  Started
 Container sentinel  Starting
 Container sentinel  Started
2
    âœ“ Redis + Sentinel dÃ©marrÃ©s
  DÃ©ploiement redis-02 (replica)...
time="2025-10-30T12:31:58Z" level=warning msg="/opt/keybuzz/redis/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container redis  Creating
 Container redis  Created
 Container sentinel  Creating
 Container sentinel  Created
 Container redis  Starting
 Container redis  Started
 Container sentinel  Starting
 Container sentinel  Started
2
    âœ“ Redis + Sentinel dÃ©marrÃ©s
  DÃ©ploiement redis-03 (replica)...
time="2025-10-30T12:32:04Z" level=warning msg="/opt/keybuzz/redis/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container redis  Creating
 Container redis  Created
 Container sentinel  Creating
 Container sentinel  Created
 Container redis  Starting
 Container redis  Started
 Container sentinel  Starting
 Container sentinel  Started
2
    âœ“ Redis + Sentinel dÃ©marrÃ©s

  Attente de stabilisation du cluster (15s)...

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 4: VÃ©rification du cluster Redis                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Test de connexion Redis:
    redis-01: [0;32mOK[0m (role: master)
    redis-02: [0;32mOK[0m (role: slave)
    redis-03: [0;32mOK[0m (role: slave)

  Test des Sentinels (avec timeout):
    redis-01: [0;32mOK[0m (voit master: 10.0.0.123)
    redis-02: [0;32mOK[0m (voit master: 10.0.0.123)
    redis-03: [0;32mOK[0m (voit master: 10.0.0.123)

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 5: Configuration Load Balancer sur HAProxy               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Configuration haproxy-01 (10.0.0.11)...
6e1a16bce980
6e1a16bce980
214e149e4206ba73c2261d217751fa3319ce2cdaa86e2d450c21fb33f7ad4220
    âœ“ Load Balancer configurÃ©
  Configuration haproxy-02 (10.0.0.12)...
e5630d9a6356
e5630d9a6356
68c7967877005e8c78f702ae47d9a47cd15884c9040be20fa00f1bf6d1df8b2f
    âœ“ Load Balancer configurÃ©

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Ã‰TAPE 6: Tests finaux                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Test HAProxy locaux:
    haproxy-01: [0;32mOK[0m
    haproxy-02: [0;32mOK[0m

  Test via Load Balancer Hetzner:
    10.0.0.10:6379: [0;32mOK[0m

  Test de rÃ©plication:
    Ã‰criture sur master via LB: [0;32mOK[0m
    Lecture sur redis-02: [0;32mOK[0m
    Lecture sur redis-03: [0;32mOK[0m

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[0;32mOK[0m REDIS HA INSTALLATION COMPLÃˆTE ET OPÃ‰RATIONNELLE

Endpoint: 10.0.0.10:6379
Credentials: /opt/keybuzz-installer/credentials/redis.env
Hash du mot de passe: e692a9301269609a...

Pour tester:
  source /opt/keybuzz-installer/credentials/redis.env
  redis-cli -h 10.0.0.10 -p 6379 -a "$REDIS_PASSWORD" --no-auth-warning

RÃ©sumÃ© complet: /opt/keybuzz-installer/credentials/redis-summary.txt
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
