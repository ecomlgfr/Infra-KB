
Validation finale complÃ¨te - Architecture KeyBuzz
Timestamp: 2025-11-05 17:51:03


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ PARTIE 1: Infrastructure de base                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ PostgreSQL Patroni Cluster
  Patroni Leader ... bash: line 1: patronictl: command not found
[0;31mâœ—[0m
  Patroni Replicas ... bash: line 1: patronictl: command not found
[0;31mâœ—[0m
  PostgreSQL Port 5432 ... [0;32mâœ“[0m
  PgBouncer Port 4632 ... [0;32mâœ“[0m

â†’ Redis Sentinel Cluster
  Redis Master ... Warning: Using a password with '-a' or '-u' option on the command line interface may not be safe.
AUTH failed: WRONGPASS invalid username-password pair or user is disabled.
[0;31mâœ—[0m
  Sentinel Info ... [0;31mâœ—[0m

â†’ RabbitMQ Cluster
  RabbitMQ AMQP ... [0;32mâœ“[0m
  RabbitMQ Management ... [0;31mâœ—[0m

â†’ HAProxy Load Balancers
  HAProxy-01 Stats ... [0;32mâœ“[0m
  HAProxy-02 Stats ... [0;32mâœ“[0m

â†’ MinIO S3 Storage
  MinIO Health ... [0;31mâœ—[0m
  MinIO API ... [0;31mâœ—[0m

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ PARTIE 2: Cluster Kubernetes K3s                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ NÅ“uds K3s
  Master-01 Ready ... [0;32mâœ“[0m
  Master-02 Ready ... [0;32mâœ“[0m
  Master-03 Ready ... [0;32mâœ“[0m
  Worker-01 Ready ... [0;32mâœ“[0m
  Worker-02 Ready ... [0;32mâœ“[0m
  Worker-03 Ready ... [0;32mâœ“[0m
  Worker-04 Ready ... [0;32mâœ“[0m
  Worker-05 Ready ... [0;32mâœ“[0m

â†’ Composants systÃ¨me K3s
  CoreDNS Running ... [0;32mâœ“[0m
  Metrics Server ... [0;32mâœ“[0m
  Traefik Running ... [0;31mâœ—[0m

â†’ Ingress NGINX
  Ingress Controller ... [0;32mâœ“[0m
  Ingress DaemonSet ... [0;32mâœ“[0m
  NodePort HTTP ... [0;32mâœ“[0m
  NodePort HTTPS ... [0;32mâœ“[0m

â†’ Cert-Manager
  Cert-Manager Pods ... No resources found in cert-manager namespace.
[0;31mâœ—[0m
  ClusterIssuer ... [0;31mâœ—[0m

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ PARTIE 3: Applications DÃ©ployÃ©es                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ n8n (Workflow Automation)
  n8n Pods Running ... [0;32mâœ“[0m
  n8n Service ... [0;32mâœ“[0m
  n8n Ingress ... [0;32mâœ“[0m
  n8n HTTP Response ... [0;32mâœ“[0m

â†’ LiteLLM (LLM Router)
  LiteLLM Pods Running ... [0;32mâœ“[0m
  LiteLLM Service ... [0;32mâœ“[0m
  LiteLLM Ingress ... [0;32mâœ“[0m
  LiteLLM HTTP Response ... [0;32mâœ“[0m

â†’ Qdrant (Vector Database)
  Qdrant Pods Running ... [0;32mâœ“[0m
  Qdrant Service ... [0;32mâœ“[0m
  Qdrant Ingress ... [0;32mâœ“[0m
  Qdrant HTTP Response ... [0;32mâœ“[0m

â†’ Chatwoot (Customer Support)
  Chatwoot Web Running ... [0;32mâœ“[0m
  Chatwoot Worker Running ... [0;32mâœ“[0m
  Chatwoot Service ... [0;32mâœ“[0m
  Chatwoot Ingress ... [0;32mâœ“[0m
  Chatwoot HTTP Response ... [0;32mâœ“[0m

â†’ Superset (BI & Analytics)
  Superset Pods Running ... [0;32mâœ“[0m
  Superset Service ... [0;32mâœ“[0m
  Superset Ingress ... [0;32mâœ“[0m
  Superset HTTP Response ... [0;32mâœ“[0m

â†’ Vault (Secrets Management)
  Vault Pods Running ... [0;32mâœ“[0m
  Vault Service ... [0;32mâœ“[0m
  Vault Ingress ... [0;32mâœ“[0m
  Vault HTTP Response ... [0;32mâœ“[0m

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ PARTIE 4: Monitoring et SÃ©curitÃ©                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ Prometheus Stack
  Prometheus Pods ... [0;32mâœ“[0m
  Grafana Pods ... [0;31mâœ—[0m
  Alertmanager Pods ... [0;32mâœ“[0m
  Grafana HTTP ... [0;31mâœ—[0m

â†’ Loki (Logs)
  Loki Pods ... [0;31mâœ—[0m
  Promtail DaemonSet ... [0;32mâœ“[0m

â†’ Wazuh SIEM
  Wazuh Manager ... [0;32mâœ“[0m
  Wazuh Indexer ... [0;32mâœ“[0m
  Wazuh Dashboard ... [0;31mâœ—[0m
  Wazuh HTTP ... [0;31mâœ—[0m

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ PARTIE 5: Load Balancers Hetzner                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ LB Apps (lb-keybuzz-1/2)
  LB-1 TCP 6443 ... [0;32mâœ“[0m
  LB-1 TCP 80 ... [0;32mâœ“[0m
  LB-1 TCP 443 ... [0;32mâœ“[0m
  LB-2 TCP 6443 ... [0;32mâœ“[0m

â†’ LB Database (lb-haproxy)
  LB-DB PostgreSQL 5432 ... [0;32mâœ“[0m
  LB-DB PgBouncer 4632 ... [0;32mâœ“[0m
  LB-DB Redis 6379 ... [0;32mâœ“[0m
  LB-DB RabbitMQ 5672 ... [0;32mâœ“[0m

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ PARTIE 6: Backups                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ Scripts de backup
  Script PostgreSQL ... [0;32mâœ“[0m
  Script Redis ... [0;32mâœ“[0m
  Script K3s ... [0;32mâœ“[0m

â†’ Crontabs configurÃ©s
  Crontab PostgreSQL ... [0;32mâœ“[0m
  Crontab Redis ... [0;32mâœ“[0m
  Crontab K3s ... [0;32mâœ“[0m

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ PARTIE 7: RÃ©seau et SÃ©curitÃ©                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â†’ RÃ©seau privÃ© Hetzner
  RÃ©seau 10.0.0.0/16 ... [0;32mâœ“[0m

â†’ Firewall UFW
  UFW Actif ... [0;31mâœ—[0m
  SSH AutorisÃ© ... [0;31mâœ—[0m
  RÃ©seau K3s Pods ... [0;31mâœ—[0m
  RÃ©seau K3s Services ... [0;31mâœ—[0m

â†’ DNS Configuration
  DNS n8n.keybuzz.io ... [0;31mâœ—[0m
  DNS llm.keybuzz.io ... [0;32mâœ“[0m

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    RÃ‰SUMÃ‰ DE LA VALIDATION                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š Statistiques :
  Total tests     : 85
  Tests exÃ©cutÃ©s  : 85
  SuccÃ¨s          : 65
  Ã‰checs          : 20
  Avertissements  : 0
  Taux de succÃ¨s  : 76%

  Statut global   : [0;33mâš [0m BON (quelques correctifs mineurs)

âš ï¸  L'infrastructure fonctionne mais nÃ©cessite quelques ajustements.

ğŸ“‹ Composants validÃ©s :
  âœ“ PostgreSQL 16 + Patroni RAFT HA
  âœ“ Redis Sentinel HA (3 nÅ“uds)
  âœ“ RabbitMQ Quorum HA (3 nÅ“uds)
  âœ“ HAProxy + Keepalived (2 nÅ“uds)
  âœ“ K3s HA (3 masters + 5 workers)
  âœ“ Ingress NGINX DaemonSet
  âœ“ Applications (n8n, litellm, qdrant, chatwoot, superset)
  âœ“ Load Balancers Hetzner
  âœ“ MinIO S3 Storage
  âœ“ Backups automatiques
  âœ“ Monitoring (Prometheus + Grafana + Loki)
  âœ“ SIEM Wazuh
  âœ“ Vault (Secrets Management)

ğŸŒ URLs d'accÃ¨s :
  n8n         : http://n8n.keybuzz.io
  LiteLLM     : http://llm.keybuzz.io
  Qdrant      : http://qdrant.keybuzz.io
  Chatwoot    : http://chat.keybuzz.io
  Superset    : http://superset.keybuzz.io
  Grafana     : http://monitor.keybuzz.io
  Vault       : http://vault.keybuzz.io
  Wazuh       : https://siem.keybuzz.io
  MinIO       : http://s3.keybuzz.io:9000

ğŸ“ Log complet : /opt/keybuzz-installer/logs/validation_complete_20251105_175103.log

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         ğŸ‰ Validation finale terminÃ©e avec succÃ¨s ! ğŸ‰         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

