# ======================================================================
# INVENTORY KEYBUZZ - Réseau Hetzner (mise à jour 2025-10)
# Fichier de vérité des groupes et rôles de serveurs
# ======================================================================

[management]
install-01

[k3s-masters]
k3s-master-01
k3s-master-02
k3s-master-03

[k3s-workers]
k3s-worker-01
k3s-worker-02
k3s-worker-03
k3s-worker-04
k3s-worker-05

[db-pool]
db-master-01
db-slave-01
db-slave-02

[haproxy-pool]
haproxy-01
haproxy-02

[redis-pool]
redis-01
redis-02
redis-03

[queue-pool]
queue-01
queue-02
queue-03

[temporal]
temporal-db-01
temporal-01

[analytics]
analytics-db-01
analytics-01
etl-01

[api-pool]
connect-01
connect-02
api-gateway-01

[billing]
crm-01

[vector]
vector-db-01

[ai]
litellm-01
ml-platform-01

[storage]
minio-01
backup-01

[security]
vault-01
siem-01

[monitoring]
monitor-01

[apps]
baserow-01
nocodb-01

[mail-pool]
mail-core-01
mail-mx-01
mail-mx-02

[dev]
builder-01

# ======================================================================
# Groupes logiques hiérarchiques (composition)
# ======================================================================

[k3s:children]
k3s-masters
k3s-workers

[databases:children]
db-pool
redis-pool
queue-pool
temporal

[ai-stack:children]
vector
ai

[apps-stack:children]
apps
analytics
api-pool
billing

[infra-core:children]
haproxy-pool
storage
security
monitoring
mail-pool
dev

# ======================================================================
# Groupes globaux
# ======================================================================

[all:children]
management
databases
k3s
apps-stack
ai-stack
infra-core

# ======================================================================
# VIPS & FLOATING IP
# ======================================================================

[db_vip]
10.0.0.10 ansible_connection=local vip_role=postgres vip_hosts="haproxy-01,haproxy-02"

[mail_floating]
49.13.35.167 ansible_connection=local vip_role=mail vip_hosts="mail-core-01"
